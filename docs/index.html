<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>


    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./CODE_OF_CONDUCT_md.html">CODE_OF_CONDUCT</a>
  
    <li><a href="./Gemfile.html">Gemfile</a>
  
    <li><a href="./Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="./LICENSE_txt.html">LICENSE</a>
  
    <li><a href="./README_md.html">README</a>
  
    <li><a href="./Rakefile.html">Rakefile</a>
  
    <li><a href="./bin/setup.html">setup</a>
  
    <li><a href="./graphqr_gemspec.html">graphqr.gemspec</a>
  
  </ul>
</div>

    <div id="classindex-section" class="nav-section">
  <h3>Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./GraphQR.html">GraphQR</a>
  
    <li><a href="./GraphQR/ApplyScopes.html">GraphQR::ApplyScopes</a>
  
    <li><a href="./GraphQR/Authorized.html">GraphQR::Authorized</a>
  
    <li><a href="./GraphQR/Configuration.html">GraphQR::Configuration</a>
  
    <li><a href="./GraphQR/Fields.html">GraphQR::Fields</a>
  
    <li><a href="./GraphQR/Fields/BaseField.html">GraphQR::Fields::BaseField</a>
  
    <li><a href="./GraphQR/Pagination.html">GraphQR::Pagination</a>
  
    <li><a href="./GraphQR/Pagination/PaginationExtension.html">GraphQR::Pagination::PaginationExtension</a>
  
    <li><a href="./GraphQR/Pagination/Resolvers.html">GraphQR::Pagination::Resolvers</a>
  
    <li><a href="./GraphQR/Pagination/Resolvers/PagyResolver.html">GraphQR::Pagination::Resolvers::PagyResolver</a>
  
    <li><a href="./GraphQR/Pagination/Types.html">GraphQR::Pagination::Types</a>
  
    <li><a href="./GraphQR/Pagination/Types/PaginationPageInfoType.html">GraphQR::Pagination::Types::PaginationPageInfoType</a>
  
    <li><a href="./GraphQR/PermittedFieldsExtension.html">GraphQR::PermittedFieldsExtension</a>
  
    <li><a href="./GraphQR/Policies.html">GraphQR::Policies</a>
  
    <li><a href="./GraphQR/Policies/AuthorizeGraphQL.html">GraphQR::Policies::AuthorizeGraphQL</a>
  
    <li><a href="./GraphQR/Policies/PunditProvider.html">GraphQR::Policies::PunditProvider</a>
  
    <li><a href="./GraphQR/QueryField.html">GraphQR::QueryField</a>
  
    <li><a href="./GraphQR/ScopeItems.html">GraphQR::ScopeItems</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main">


<p><a href="https://rubygems.org/gems/graphqr"><img src="https://badge.fury.io/rb/graphqr.svg"></a> <a href="https://travis-ci.com/QultureRocks/graphqr"><img src="https://travis-ci.com/QultureRocks/graphqr.svg?branch=master"></a> <a href="https://codeclimate.com/github/QultureRocks/graphqr/maintainability"><img src="https://api.codeclimate.com/v1/badges/7f7b51e89e8fe4de1b23/maintainability"></a></p>

<h1 id="label-GraphQR"><a href="GraphQR.html"><code>GraphQR</code></a><span><a href="#label-GraphQR">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>A compilation of useful extensions and helpers for <a href="https://github.com/rmosolgo/graphql-ruby">graphql-ruby</a>.</p>
<ul><li>
<p><a href="https://qulturerocks.github.io/graphqr/">API Documentation</a></p>
</li><li>
<p><a href="https://qulture.rocks">Qulture.Rocks</a></p>
</li></ul>

<h2 id="label-Installation">Installation<span><a href="#label-Installation">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Add this line to your application&#39;s Gemfile:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;graphqr&#39;</span>
</pre>

<p>And then execute:</p>

<pre>$ bundle</pre>

<p>Or install it yourself as:</p>

<pre>$ gem install graphqr</pre>

<h2 id="label-Configuration+-28optional-29">Configuration (optional)<span><a href="#label-Configuration+-28optional-29">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="GraphQR.html"><code>GraphQR</code></a> uses <code>pagy</code> and <code>pundit</code> by default and activates both <code>Authorization</code> and <code>Pagination</code> modules. If you&#39;d like to create a specific configuration, create <code>config/initializers/graphql.rb</code> with</p>

<pre class="ruby"><span class="ruby-constant">GraphQR</span>.<span class="ruby-identifier">configure</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">config</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">config</span>.<span class="ruby-identifier">use_pagination</span> = <span class="ruby-keyword">true</span> <span class="ruby-comment"># or false to disable</span>
  <span class="ruby-identifier">config</span>.<span class="ruby-identifier">use_authorization</span> = <span class="ruby-keyword">true</span> <span class="ruby-comment"># or false to disable</span>

  <span class="ruby-identifier">config</span>.<span class="ruby-identifier">paginator</span> = <span class="ruby-value">:pagy</span> <span class="ruby-comment"># only pagy is available for now</span>
  <span class="ruby-identifier">config</span>.<span class="ruby-identifier">policy_provider</span> = <span class="ruby-value">:pundit</span> <span class="ruby-comment"># only pundit is available for now</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-Modules">Modules<span><a href="#label-Modules">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>To use the extensions correctly add <code> field_class GraphQR::Fields::BaseField </code></p>

<p>to your <code>BaseObject</code> class. This will add the <code>paginate</code> options to your fields and add the necessary extensions according to the modules you activated.</p>

<h3 id="label-Pagination">Pagination<span><a href="#label-Pagination">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The Pagination module consists in a easier way of dealing with pages. Instead of using <code>cursors</code> we implemented a more Rails way using <code>per</code> and <code>page</code>. Our implementation is (for now) based on <a href="https://github.com/ddnexus/pagy">Pagy</a> so you must have it installed.</p>

<p>To use the Pagination module add</p>

<pre class="ruby"><span class="ruby-identifier">extend</span> <span class="ruby-constant">GraphQR</span><span class="ruby-operator">::</span><span class="ruby-constant">Pagination</span>
</pre>

<p>to any <code>GraphQL::Schema::Object</code> you&#39;d like, but we recommend adding it to your <code>BaseObject</code> class.</p>

<h4 id="label-Usage">Usage<span><a href="#label-Usage">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby"><span class="ruby-identifier">field</span> <span class="ruby-value">:users</span>, <span class="ruby-constant">UserType</span>.<span class="ruby-identifier">pagination_type</span>, <span class="ruby-value">paginate:</span> <span class="ruby-keyword">true</span>
</pre>

<p>A <code>pagination_type</code> adds the <code>per</code> and <code>page</code> arguments and adds a <code>page_info</code> field to the response.</p>

<p>Example gql: <code> users(per: 10, page: 1) {   nodes {     id     name   } } </code></p>

<h3 id="label-Authorization">Authorization<span><a href="#label-Authorization">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>The Authorization module in some wrappers around a <code>PolicyProvider</code> (only Pundit for now). And allows some basic behaviors. Everything on this module depends on a <code>policy_provider</code> passed to the GraphQL context. You can add it like this:</p>

<pre>context = {
  policy_provider: GraphQR::Policies::PunditProvider.new(policy_context: pundit_user)
  ...
}

Schema.execute(query, variables: variables, context: context, operation_name: operation_name)</pre>

<h4 id="label-Authorized">Authorized<span><a href="#label-Authorized">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>This module adds a check on the object policy before resolving it. It always searches for the <code>show?</code> policy of the record. It works by extending the <code>authorized?</code> method.</p>

<p>To add this behavior, add <code> extend GraphQR::Authorized </code> to any <code>GraphQL::Schema::Object</code> you&#39;d like, but we recommend adding it to your <code>BaseObject</code> class.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">users</span> {
  <span class="ruby-identifier">id</span>
  <span class="ruby-identifier">tags</span> {
    <span class="ruby-identifier">id</span>
  }
}
</pre>

<p>In this case, the authorization check will run for each <code>user</code>, calling <code>UserPolicy.show?</code> and for each tag, calling <code>TagPolicy.show?</code>. If any policy returns falsy, the object is returned as <code>null</code>.</p>

<h4 id="label-ScopeItems">ScopeItems<span><a href="#label-ScopeItems">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>This module adds the PolicyProvider scope to the fields that represent an <code>ActiveRecord::Relation</code>. It works by implementing the <code>self.scope_items</code> method.</p>

<p>To add this behavior, add <code> extend GraphQR::ScopeItems </code> to any <code>GraphQL::Schema::Object</code> you&#39;d like, but we recommend adding it to your <code>BaseObject</code> class.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">users</span> {
  <span class="ruby-identifier">id</span>
}
</pre>

<p>In this case, the <code>users</code> list will be scoped using <code>UserPolicy::Scope</code> provided by Pundit.</p>

<h4 id="label-AuthorizeGraphQL">AuthorizeGraphQL<span><a href="#label-AuthorizeGraphQL">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>This module is a wrapper around the PolicyProvider authorization. It adds the <code>authorize_graphql</code> method, similar to Pundit&#39;s <code>authorize</code>, but it returns an <code>GraphQL::ExecutionError</code> instead of a <code>Pundit::NotAuthorizedError</code></p>

<p>To add this behavior, add <code> include GraphQR::AuthorizeGraphQL </code> where you want to use this methos, but we recommend adding it to your <code>Mutations</code> and <code>Resolvers</code> classes.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">authorize_graphql</span> <span class="ruby-constant">User</span>, <span class="ruby-value">:index?</span>
</pre>

<h3 id="label-Helpers">Helpers<span><a href="#label-Helpers">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>We also provide some helpers to make implementing GraphQL on ruby easier.</p>

<h4 id="label-ApplyScopes">ApplyScopes<span><a href="#label-ApplyScopes">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>This modules is based on the <a href="https://github.com/plataformatec/has_scope/">has_scope</a> gem. It provides an <code>apply_scopes</code> method that can search for model scopes and use them on a collection</p>

<p>To add this method, add <code> include GraphQR::ApplyScopes </code> where you&#39;d like to use it, but we recommend adding it to your <code>Resolvers</code>.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">apply_scopes</span>(<span class="ruby-constant">User</span>, { <span class="ruby-value">order_by_name:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">with_id:</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>] })
</pre>

<h4 id="label-QueryField">QueryField<span><a href="#label-QueryField">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>This module adds the <code>query_field</code> helper. It adds an easy way of creating simple fields with resolvers.</p>

<p>To add this method, add <code> extend GraphQR::QueryField </code> to your <code>BaseObject</code>.</p>

<p>Read more about its use in the <a href="https://qulturerocks.github.io/graphqr/GraphQR/QueryField.html">documentation</a></p>

<h2 id="label-Development">Development<span><a href="#label-Development">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>After checking out the repo, run <code>bin/setup</code> to install dependencies. Then, run <code>rake spec</code> to run the tests. You can also run <code>bin/console</code> for an interactive prompt that will allow you to experiment.</p>

<p>To install this gem onto your local machine, run <code>bundle exec rake install</code>. To release a new version, update the version number in <code>version.rb</code>, and then run <code>bundle exec rake release</code>, which will create a git tag for the version, push git commits and tags, and push the <code>.gem</code> file to <a href="https://rubygems.org">rubygems.org</a>.</p>

<h2 id="label-Contributing">Contributing<span><a href="#label-Contributing">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/QultureRocks/graphqr">github.com/QultureRocks/graphqr</a>. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to the <a href="http://contributor-covenant.org">Contributor Covenant</a> code of conduct.</p>

<h2 id="label-License">License<span><a href="#label-License">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>The gem is available as open source under the terms of the <a href="https://opensource.org/licenses/MIT">MIT License</a>.</p>

<h2 id="label-Code+of+Conduct">Code of Conduct<span><a href="#label-Code+of+Conduct">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>Everyone interacting in the <a href="GraphQR.html"><code>GraphQR</code></a> projectâ€™s codebases, issue trackers, chat rooms and mailing lists is expected to follow the <a href="https://github.com/QultureRocks/graphqr/blob/master/CODE_OF_CONDUCT.md">code of conduct</a>.</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

